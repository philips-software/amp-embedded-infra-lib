set_target_properties(${CCOLA_COMPONENT_NAME} PROPERTIES OUTPUT_NAME ${CCOLA_COMPONENT_BINARY_NAME})
set_target_properties(${CCOLA_COMPONENT_NAME} PROPERTIES FOLDER ${CCOLA_PACKAGE_NAME})

if(DEFINED CCOLA_COMPONENT_INCLUDE_DIRECTORIES)
    target_include_directories(${CCOLA_COMPONENT_NAME} PRIVATE ${CCOLA_COMPONENT_INCLUDE_DIRECTORIES})
endif()

if(DEFINED CCOLA_COMPONENT_DEFINITIONS)
    set_target_properties(${CCOLA_COMPONENT_NAME} PROPERTIES COMPILE_DEFINITIONS "${CCOLA_COMPONENT_DEFINITIONS}")
endif()

if(DEFINED CCOLA_COMPONENT_COMPILE_OPTIONS)
    string(REPLACE " " ";" CCOLA_COMPONENT_COMPILE_OPTIONS "${CCOLA_COMPONENT_COMPILE_OPTIONS}")
    target_compile_options(${CCOLA_COMPONENT_NAME} PRIVATE ${CCOLA_COMPONENT_COMPILE_OPTIONS})
endif()

if(DEFINED CCOLA_COMPONENT_LINK_OPTIONS)
    set_target_properties(${CCOLA_COMPONENT_NAME} PROPERTIES LINK_FLAGS "${CCOLA_COMPONENT_LINK_OPTIONS}")
endif()

foreach(item ${CCOLA_COMPONENT_SOURCE_GROUP})
    ccola_mapentry_split_key_value(${item} key value)
    string(REPLACE "/" "\\" key_ "${key}")
    source_group(${key_} FILES "${value}")
endforeach()

foreach(item ${CCOLA_COMPONENT_DEPENDENCIES})
    add_dependencies(${CCOLA_COMPONENT_NAME} ${item})
endforeach()

foreach(item ${CCOLA_COMPONENT_INHERITABLE_DEPENDENCIES})
    add_dependencies(${CCOLA_COMPONENT_NAME} ${item})
endforeach()

if(DEFINED CCOLA_COMPONENT_EXTERNAL_LIBRARIES)
    target_link_libraries(${CCOLA_COMPONENT_NAME} ${CCOLA_COMPONENT_EXTERNAL_LIBRARIES})
endif()

if(DEFINED CCOLA_COMPONENT_TEST)
    add_test(
        NAME ${CCOLA_COMPONENT_NAME}
        COMMAND ${CCOLA_COMPONENT_NAME} ${CCOLA_COMPONENT_TEST_PARAMS}
        WORKING_DIRECTORY ${CCOLA_COMPONENT_TEST_WORKING_DIR}
    )
endif()

configure_file(
    ${CCOLA_COMPONENT_GENERIC_CPP_INFO}
    ${CCOLA_COMPONENT_INFO_INSTALL_DIR}/${CCOLA_COMPONENT_NAME}.generic_cpp.inc ESCAPE_QUOTES @ONLY)
configure_file(
    ${CCOLA_COMPONENT_GENERIC_CPP_PUBLIC_INFO}
    ${CCOLA_PUBLIC_COMPONENT_INFO_INSTALL_DIR}/${CCOLA_COMPONENT_NAME}.generic_cpp.inc ESCAPE_QUOTES @ONLY)

unset(CCOLA_COMPONENT_SOURCEFILES)
unset(CCOLA_COMPONENT_SOURCE_DEPENDENCIES)
unset(CCOLA_COMPONENT_INHERITABLE_INCLUDE_DIRECTORIES)
unset(CCOLA_COMPONENT_INCLUDE_DIRECTORIES)
unset(CCOLA_COMPONENT_LIBRARY_DIRECTORIES)
unset(CCOLA_COMPONENT_EXTERNAL_LIBRARIES)
unset(CCOLA_COMPONENT_LINK_LIBRARIES)
unset(CCOLA_COMPONENT_INHERITABLE_LINK_LIBRARIES)
unset(CCOLA_COMPONENT_RUNTIME_DIRECTORIES)
unset(CCOLA_COMPONENT_DEFINITIONS)
unset(CCOLA_COMPONENT_INHERITABLE_DEFINITIONS)
unset(CCOLA_COMPONENT_COMPILE_OPTIONS)
unset(CCOLA_COMPONENT_LINK_OPTIONS)
unset(CCOLA_COMPONENT_LINKER_SCRIPTS)
unset(CCOLA_COMPONENT_DEFAULT_LINKER_SCRIPTS)
unset(CCOLA_COMPONENT_TEST)
unset(CCOLA_COMPONENT_TEST_PARAMS)
unset(CCOLA_COMPONENT_SOURCEFILES_FOR_EXECUTABLE)
unset(CCOLA_COMPONENT_CPP_CLI)
unset(CCOLA_EXCLUDE_FROM_ALL)
