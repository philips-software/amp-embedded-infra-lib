set_property(DIRECTORY PROPERTY INCLUDE_DIRECTORIES)

if(DEFINED CCOLA_COMPONENT_LIBRARY_DIRECTORIES)
    link_directories(${CCOLA_COMPONENT_LIBRARY_DIRECTORIES})
endif()

if(NOT ${CCOLA_ARCH_FAMILY} STREQUAL win)
    if(NOT DEFINED CCOLA_OPTIMIZE)
        set(CCOLA_OPTIMIZE none)
    endif()

    if("${CCOLA_OPTIMIZE}" STREQUAL "size")
        set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Os")
        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Os")
        ccola_definitions("NDEBUG")
    elseif("${CCOLA_OPTIMIZE}" STREQUAL "debug")
        set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Og")
        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Og")
    elseif("${CCOLA_OPTIMIZE}" STREQUAL "none")
        set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -O0")
        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -O0")
    else()
        message(FATAL_ERROR "Unrecognized optimization: ${CCOLA_OPTIMIZE}")
    endif()
endif()

if(${CCOLA_ARCH} STREQUAL win)
    if(DEFINED CCOLA_COMPONENT_CPP_CLI)
        ccola_compile_options("/clr")
        string(REPLACE "/RTC1" "" CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG}")
    else()
        set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} /RTC1")
    endif()
endif()
