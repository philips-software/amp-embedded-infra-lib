<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MemoryRange :: Embedded Infrastructure Library</title>
    <link rel="canonical" href="https://philips-software.github.io/embeddedinfralib/embedded_infrastructure_library/1.3.0/MemoryRange.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/centralesans.css">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-extra.css">
    <link rel="icon" href="../../favicon.svg" type="image/svg+xml">

    <link rel="stylesheet" href="../../_/css/site-extra.css">
    <link rel="stylesheet" href="../../_/css/centralesans.css">

        <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header" role="banner">
    <div class="header-top-row">
        <div class="container">
            <nav class="navbar">
                <div class="navbar-brand">
                    <a class="navbar-brand">
                        <img class="scale-down"  src="../../philips-logo.png" alt="Philips"/>
                    </a>
                    <a class="navbar-item" href="https://philips-software.github.io/embeddedinfralib">Embedded Infrastructure Library</a>
                    <button class="navbar-burger" data-target="topbar-nav">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
                <div id="topbar-nav" class="navbar-menu">
                    <div class="navbar-end">
                        <a class="navbar-item" href="https://github.com/philips-software/embeddedinfralib">
                            <span class="icon">
                                <svg aria-labelledby="simpleicons-github-icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <title id="simpleicons-github-icon">GitHub</title>
                                <path fill="#f5f5f5" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                            </span>
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </div>
</header>
<div class="body">
<main class="article">
<div class="toolbar toolbar-wrap">
  <div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
    <a href="index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Embedded Infrastructure Library documentation</a></li>
    <li><a href="MemoryRange.html">MemoryRange</a></li>
  </ul>
</nav>
      <div class="edit-this-page"><a href="https://github.com/philips-software/embeddedinfralib/edit/develop/documents/modules/ROOT/pages/MemoryRange.adoc">Edit this page</a></div>
      </div>
</div>
  <div class="content">
<div class="nav-container" data-component="embedded_infrastructure_library" data-version="1.3.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Embedded Infrastructure Library documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="CodingStandard.html">Coding Standard</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="MemoryRange.html">MemoryRange</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Containers.html">Containers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Echo.html">Echo</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="NetworkConnections.html">NetworkConnections</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div></div>
    </div>
  </aside>
</div>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">MemoryRange</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Embedded applications regularly handle blocks of memory. Such memory may
either be typed (for example, consisting of a number of characters) or
un-typed. Traditionally, blocks of memory are handled by having a
pointer to its first element and a separate size. Since passing around
two separate but related parameters is cumbersome at best and
error-prone at its worst, we have improved on dealing with blocks of
memory by introducing the class template <code>MemoryRange</code>. A <code>MemoryRange</code>
is an object which defines a block of memory with a start and an end,
and which has a number of functions that makes dealing with those blocks
as a whole easier. This approach reduces the potential for buffer
overflows, since while it is easy to shrink a block or to split it; it
is much more difficult to create a larger block, thereby overflowing the
original block of memory.</p>
</div>
<div class="paragraph">
<p>The MemoryRanges that are most often used are <code>MemoryRange&lt;uint8_t&gt;</code>,
which has an alias <code>ByteRange</code>, and its const counterpart
<code>ConstByteRange</code> which aliases to <code>MemoryRange&lt;const uint8_t&gt;</code>.
Everywhere where untyped memory is used <code>ByteRange</code> or <code>ConstByteRange</code>
is used to define where the data resides in memory. For example: the SPI
interface <code>SendData</code> method takes a <code>ConstByteRange</code> parameter
specifying the data which should be sent.</p>
</div>
<div class="paragraph">
<p>A <code>MemoryRange</code> does not include the storage it points to. Modifying a
<code>MemoryRange</code> does not modify the storage. If storage is needed,
std::array is a good candidate. After creating a std::array and filling
it with data, a MemoryRange can be constructed from it by using
<code>MakeRange</code>, after which the <code>MemoryRange</code> can be used for passing
around the data.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_memoryrange_accessors"><a class="anchor" href="#_memoryrange_accessors"></a>MemoryRange Accessors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These are the most used accessors of <code>MemoryRange</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>begin()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a pointer to the first element of the data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>end()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a pointer to one position beyond the last element of
the data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>empty()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns true if and only if <code>size()</code> == 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the number of elements pointed to: <code>end()</code> -
<code>begin()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pop_front(num)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove num elements from the front of the range</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pop_back(num)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove num elements from the back of the range</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shrink_from_front_to(newSize)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>size()</code> &gt; <code>newSize</code>, pop elements
from the front until <code>size()</code> == <code>newSize</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shrink_from_back_to(newSize)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>size()</code> &gt; <code>newSize</code>, pop elements
from the back until <code>size()</code> == <code>newSize</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_helper_functions"><a class="anchor" href="#_helper_functions"></a>Helper Functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the members of MemoryRange, a number of helper functions
exist:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MakeRange(&#8230;&#8203;)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert the parameter(s) to a <code>MemoryRange</code>. Works
with <code>std::array</code>, <code>infra::BoundedVector</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Head(range, size)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns range if its size is less than size,
otherwise a new range consisting of the first size elements of range</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Tail(range, size)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns range if its size is less than size,
otherwise a new range consisting of the last size elements of range</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DiscardHead(range, size)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns an empty range if size is greater
than <code>range.size()</code>, otherwise a new range consisting of range except
for the first size elements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DiscardTail(range, size)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns an empty range if size is greater
than <code>range.size()</code>, otherwise a new range consisting of range except
for the last size elements</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_example"><a class="anchor" href="#_example"></a>Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This example function shows how to use the MemoryRange functions to cut
up a block of data into smaller pieces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">void SendInBlocks(infra::ConstByteRange sendData, std::size_t blockSize)
{
    while (!sendData.empty())
    {
        Send(infra::Head(sendData, blockSize));
        sendData = infra::DiscardHead(sendData, blockSize);
    }
}

void Example()
{
    std::array&lt;uint8_t, 256&gt; data = { ... };
    SendInBlocks(data, 16);
}</code></pre>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Â© Koninklijke Philips N.V., 2022. All rights reserved.</p>
</footer>

<script type="text/javascript" src="../../_/js/medium-zoom.min.js"></script>
<script type="text/javascript">
mediumZoom('.data-zoomable img', {
  margin: 50,
  background: '#FFFFFFA1',
})
</script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
