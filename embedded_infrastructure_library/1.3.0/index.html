<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EmbeddedInfraLib :: Embedded Infrastructure Library</title>
    <link rel="canonical" href="https://philips-software.github.io/amp-embedded-infra-lib/embedded_infrastructure_library/2.1.0/index.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/centralesans.css">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-extra.css">
    <link rel="icon" href="../../favicon.svg" type="image/svg+xml">

    <link rel="stylesheet" href="../../_/css/site-extra.css">
    <link rel="stylesheet" href="../../_/css/centralesans.css">

        <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header" role="banner">
    <div class="header-top-row">
        <div class="container">
            <nav class="navbar">
                <div class="navbar-brand">
                    <a class="navbar-brand">
                        <img class="scale-down"  src="../../philips-logo.png" alt="Philips"/>
                    </a>
                    <a class="navbar-item" href="https://philips-software.github.io/amp-embedded-infra-lib">Embedded Infrastructure Library</a>
                    <button class="navbar-burger" data-target="topbar-nav">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
                <div id="topbar-nav" class="navbar-menu">
                    <div class="navbar-end">
                        <a class="navbar-item" href="https://github.com/philips-software/amp-embedded-infra-lib">
                            <span class="icon">
                                <svg aria-labelledby="simpleicons-github-icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <title id="simpleicons-github-icon">GitHub</title>
                                <path fill="#f5f5f5" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                            </span>
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </div>
</header>
<div class="body">
<main class="article">
<div class="toolbar toolbar-wrap">
  <div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
    <a href="../2.1.0/index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Embedded Infrastructure Library documentation</a></li>
    <li><a href="index.html">EmbeddedInfraLib</a></li>
  </ul>
</nav>
  <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.3.0</button>
  <div class="version-menu">
    <a class="version" href="../2.1.0/index.html">2.1.0</a>
    <a class="version is-current" href="index.html">1.3.0</a>
  </div>
</div>
    <div class="edit-this-page"><a href="https://github.com/philips-software/amp-embedded-infra-lib/edit/develop/documents/modules/ROOT/pages/index.adoc">Edit this page</a></div>
      </div>
</div>
  <div class="content">
<div class="nav-container" data-component="embedded_infrastructure_library" data-version="1.3.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Embedded Infrastructure Library documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="CodingStandard.html">Coding Standard</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="MemoryRange.html">MemoryRange</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Containers.html">Containers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Echo.html">Echo</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="NetworkConnections.html">NetworkConnections</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div></div>
    </div>
  </aside>
</div>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">EmbeddedInfraLib</h1>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EmbeddedInfraLib is a set of C++ libraries and headers that provide heap-less, <a href="https://en.wikipedia.org/wiki/Standard_Template_Library">STL</a> like, infrastructure for embedded software development. It includes, amongst others; a hardware abstraction layer (HAL), a <a href="Echo.html" class="page">remote procedure call</a> (RPC) implementation, a <a href="NetworkConnections.html" class="page">networking layer</a>, a secure upgrade mechanism and several other re-usable utility classes.</p>
</div>
<div class="paragraph">
<p>EmbeddedInfraLib is available as <a href="https://philips-software.github.io/">Philips Open Source</a> under a <a href="https://choosealicense.com/licenses/mit/">MIT</a> license.</p>
</div>
<div class="paragraph">
<p><a href="https://sonarcloud.io/summary/new_code?id=philips-software_embeddedinfralib"><span class="image"><img src="https://sonarcloud.io/api/project_badges/measure?project=philips-software_embeddedinfralib&amp;metric=ncloc" alt="Lines of Code"></span></a> <a href="https://sonarcloud.io/summary/new_code?id=philips-software_embeddedinfralib"><span class="image"><img src="https://sonarcloud.io/api/project_badges/measure?project=philips-software_embeddedinfralib&amp;metric=coverage" alt="Coverage"></span></a> <a href="https://sonarcloud.io/summary/new_code?id=philips-software_embeddedinfralib"><span class="image"><img src="https://sonarcloud.io/api/project_badges/measure?project=philips-software_embeddedinfralib&amp;metric=reliability_rating" alt="Reliability Rating"></span></a> <a href="https://sonarcloud.io/summary/new_code?id=philips-software_embeddedinfralib"><span class="image"><img src="https://sonarcloud.io/api/project_badges/measure?project=philips-software_embeddedinfralib&amp;metric=security_rating" alt="Security Rating"></span></a> <a href="https://sonarcloud.io/summary/new_code?id=philips-software_embeddedinfralib"><span class="image"><img src="https://sonarcloud.io/api/project_badges/measure?project=philips-software_embeddedinfralib&amp;metric=sqale_rating" alt="Maintainability Rating"></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="imageblock plantuml">
<div class="content">
<img src="http://www.plantuml.com/plantuml/png/bPDHQiCm38RVSuhi0CiPUeynZA8gYQaj1LdkDaRllYJGm40fH0_6jcJv-t_iIp5GgparRpPHfXP9QoBWTwcM8bFJj4lCW3SOgQtpg72bzdVRNGCbpyB4rlOYbcJ9gfDS6uI-nkIdioY5P_EFlM2DhklszUSsU_ndcbLC-ZguK8IJ76m752wIoADTMsBOgkPKnyXEKI6zHwHo96VdEgddsTStsUN5YZNthhDCzYLwSpAcWEwHQZ4TYThXJegQ8Bbw8Xlf0BwDvOTnKc6f9RmitD3MAqvIHHuK_7TpNqOFoPGW-wm6tvxDCRzs-T5SYA_B5_m3" alt="diagram">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_infra"><a class="anchor" href="#_infra"></a>infra</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>infra</code> package contains the building blocks that all further code is built upon. There are basics concept like <a href="MemoryRange.html" class="page"><code>infra::MemoryRange</code></a> that provides an abstraction for a block of memory and several <a href="Containers.html" class="page">Containers</a> that provide fixed-size alternatives for the well-known standard library containers like: <code>std::vector</code>, <code>std::list</code>, <code>std::queue</code>, etc.</p>
</div>
<div class="paragraph">
<p>In the next few chapters the contents of the components within <code>infra</code> will be described.</p>
</div>
<div class="sect2">
<h3 id="_util"><a class="anchor" href="#_util"></a>util</h3>
<div class="sect3">
<h4 id="_infraboundedstring"><a class="anchor" href="#_infraboundedstring"></a>infra::BoundedString</h4>
<div class="paragraph">
<p><code>infra::BoundedString</code> is similar to <code>std::string</code> except that it can contain a maximum number of characters, and is not zero-terminated by default (see GitHub issue <a href="https://github.com/philips-software/embeddedinfralib/issues/37">#37</a>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">infra::BoundedString::WithStorage&lt;5&gt; string("abc");
EXPECT_EQ('a', string.front());
EXPECT_EQ('c', string.back());
EXPECT_FALSE(string.empty());
EXPECT_FALSE(string.full());
EXPECT_EQ(3, string.size());
EXPECT_EQ(5, string.max_size());</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_infracyclicbuffer"><a class="anchor" href="#_infracyclicbuffer"></a>infra::CyclicBuffer</h4>
<div class="paragraph">
<p><code>infra::CyclicBuffer</code> transforms a given chunk of memory into a cyclic buffer. Data can be pushed into this buffer, and popped out again. With ContiguousRange(), the largest block starting at the start can be obtained. This is useful when feeding large blocks to e.g. DMA. In practise, the typedef CyclicByteBuffer will most often be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">infra::CyclicBuffer&lt;uint8_t&gt;::WithStorage&lt;4&gt; buffer;
buffer.Push(std::vector&lt;uint8_t&gt;{ 3, 7, 9 });
buffer.Pop(2);
buffer.Push(std::vector&lt;uint8_t&gt;{ 2, 4 });

EXPECT_EQ((std::vector&lt;uint8_t&gt;{ 9, 2 }), buffer.ContiguousRange());
EXPECT_EQ(3, buffer.Size());
EXPECT_EQ(1, buffer.Available());</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_infrafunction"><a class="anchor" href="#_infrafunction"></a>infra::Function</h4>
<div class="paragraph">
<p><code>infra::Function</code> is similar to <code>std::function</code>. It is an object which can contain any callable function object, e.g. free function pointers and lambda expressions. A Function is declared by providing the function signature and optionally extra storage space for the function. For example, <code>infra::Function&lt;void()&gt; f;</code> declares a function object <code>f</code> that has a void return-type and no parameters. <code>infra::Function&lt;int(char x)&gt; g;</code> declares a function object <code>g</code> that has an <code>int</code> return-type and one parameter of type <code>char</code>.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">Function&lt;void()&gt; f = [this]() { Trigger(); };
if (f)
  f();        // Call the lambda function which calls this-&gt;Trigger
f = nullptr;  // Clear the function</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since no heap is used, all data used by the function object must be stored inside Function itself. The amount of data necessary is not known upfront, so the Function is parameterized with an ExtraSize parameter to reserve storage. For example, this lambda expression requires no storage: <code>[]() {}</code> while this expression requires 8 bytes of extra storage on a 32-bit platform: <code>[this, &amp;x]() { DoSomething(x); }</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">Function&lt;void()&gt; f = [this, &amp;x]() { DoSomething(x); }; // Compile error, too much storage is needed
Function&lt;void(), 2 * sizeof(void*)&gt; g = [this, &amp;x]() { DoSomething(x); }; // Ok.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>© Koninklijke Philips N.V., 2022. All rights reserved.</p>
</footer>

<script type="text/javascript" src="../../_/js/medium-zoom.min.js"></script>
<script type="text/javascript">
mediumZoom('.data-zoomable img', {
  margin: 50,
  background: '#FFFFFFA1',
})
</script>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
