<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="480.2083px" preserveAspectRatio="none" style="width:907px;height:480px;" version="1.1" viewBox="0 0 907 480" width="907.2917px" zoomAndPan="magnify"><defs><linearGradient id="gabcusa2z92qi0" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#2FA4E7"/><stop offset="100%" stop-color="#2683B9"/></linearGradient></defs><g><!--class SharedOwnedObserver--><g class="entity" data-entity="SharedOwnedObserver" data-source-line="3" data-uid="ent0002" id="entity_SharedOwnedObserver"><rect fill="none" height="193.3675" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.0417;" width="262.2849" x="537" y="17.7083"/><rect fill="url(#gabcusa2z92qi0)" height="34.1715" rx="4.1667" ry="4.1667" style="stroke:url(#gabcusa2z92qi0);stroke-width:1.0417;" width="262.2849" x="537" y="17.7083"/><rect fill="url(#gabcusa2z92qi0)" height="4.1667" style="stroke:url(#gabcusa2z92qi0);stroke-width:1.0417;" width="262.2849" x="537" y="47.7132"/><rect fill="none" height="193.3675" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.0417;" width="262.2849" x="537" y="17.7083"/><ellipse cx="592.2022" cy="34.7941" fill="#EDF0F2" rx="10.4167" ry="10.4167" style="stroke:#BABDBF;stroke-width:1.0417;"/><path d="M594.1065,39.2212 Q593.6833,39.4328 593.2113,39.5467 Q592.7393,39.6606 592.2348,39.6606 Q590.3793,39.6606 589.4028,38.4562 Q588.4425,37.2355 588.4425,34.9406 Q588.4425,32.6294 589.4028,31.425 Q590.3793,30.2043 592.2348,30.2043 Q592.7393,30.2043 593.2113,30.3182 Q593.6996,30.4159 594.1065,30.6437 L594.1065,32.6457 Q593.6508,32.2225 593.2113,32.0272 Q592.7719,31.8156 592.3162,31.8156 Q591.3233,31.8156 590.8188,32.6131 Q590.3142,33.3944 590.3142,34.9406 Q590.3142,36.4705 590.8188,37.2518 Q591.3233,38.033 592.3162,38.033 Q592.7719,38.033 593.2113,37.8377 Q593.6508,37.6424 594.1065,37.2192 L594.1065,39.2212 Z " fill="#2FA4E7"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="133.1304" x="617.2022" y="38.7609">SharedOwnedObserver</text><line style="stroke:#2FA4E7;stroke-width:1.0417;" x1="538.0417" x2="798.2432" y1="51.8799" y2="51.8799"/><rect fill="none" height="6.25" style="stroke:#2683B9;stroke-width:1.0417;" width="6.25" x="545.3333" y="66.3615"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="177.6993" x="562" y="71.8908">SharedOwningSubject* subject</text><line style="stroke:#2FA4E7;stroke-width:1.0417;" x1="538.0417" x2="798.2432" y1="83.9681" y2="83.9681"/><ellipse cx="548.4583" cy="101.5747" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="132.8171" x="562" y="103.979">bool IsAttached() const</text><ellipse cx="548.4583" cy="125.3296" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="225.8265" x="562" y="127.7339">SharedOwningSubject&amp; Subject() const</text><ellipse cx="548.4583" cy="149.0845" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="77.7802" x="562" y="151.4887">void Detach()</text><ellipse cx="548.4583" cy="172.8394" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="106.7841" x="562" y="175.2436">void Attached() {}</text><ellipse cx="548.4583" cy="196.5942" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="113.7217" x="562" y="198.9985">void Detaching() {}</text></g><!--class SharedOwningSubject--><g class="entity" data-entity="SharedOwningSubject" data-source-line="12" data-uid="ent0003" id="entity_SharedOwningSubject"><rect fill="none" height="193.3675" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.0417;" width="417.543" x="17.7083" y="17.7083"/><rect fill="url(#gabcusa2z92qi0)" height="34.1715" rx="4.1667" ry="4.1667" style="stroke:url(#gabcusa2z92qi0);stroke-width:1.0417;" width="417.543" x="17.7083" y="17.7083"/><rect fill="url(#gabcusa2z92qi0)" height="4.1667" style="stroke:url(#gabcusa2z92qi0);stroke-width:1.0417;" width="417.543" x="17.7083" y="47.7132"/><rect fill="none" height="193.3675" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.0417;" width="417.543" x="17.7083" y="17.7083"/><ellipse cx="153.7064" cy="34.7941" fill="#EDF0F2" rx="10.4167" ry="10.4167" style="stroke:#BABDBF;stroke-width:1.0417;"/><path d="M155.6107,39.2212 Q155.1875,39.4328 154.7155,39.5467 Q154.2435,39.6606 153.7389,39.6606 Q151.8834,39.6606 150.9069,38.4562 Q149.9466,37.2355 149.9466,34.9406 Q149.9466,32.6294 150.9069,31.425 Q151.8834,30.2043 153.7389,30.2043 Q154.2435,30.2043 154.7155,30.3182 Q155.2038,30.4159 155.6107,30.6437 L155.6107,32.6457 Q155.1549,32.2225 154.7155,32.0272 Q154.276,31.8156 153.8203,31.8156 Q152.8275,31.8156 152.3229,32.6131 Q151.8183,33.3944 151.8183,34.9406 Q151.8183,36.4705 152.3229,37.2518 Q152.8275,38.033 153.8203,38.033 Q154.276,38.033 154.7155,37.8377 Q155.1549,37.6424 155.6107,37.2192 L155.6107,39.2212 Z " fill="#2FA4E7"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="126.797" x="178.7064" y="38.7609">SharedOwningSubject</text><line style="stroke:#2FA4E7;stroke-width:1.0417;" x1="18.75" x2="434.2097" y1="51.8799" y2="51.8799"/><rect fill="none" height="6.25" style="stroke:#2683B9;stroke-width:1.0417;" width="6.25" x="26.0417" y="66.3615"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="263.2339" x="42.7083" y="71.8908">SharedPtr&lt;SharedOwnedObserver&gt; observer</text><line style="stroke:#2FA4E7;stroke-width:1.0417;" x1="18.75" x2="434.2097" y1="83.9681" y2="83.9681"/><ellipse cx="29.1667" cy="101.5747" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="381.0847" x="42.7083" y="103.979">void Attach(const SharedPtr&lt;SharedOwnedObserver&gt;&amp; observer)</text><ellipse cx="29.1667" cy="125.3296" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="77.7802" x="42.7083" y="127.7339">void Detach()</text><ellipse cx="29.1667" cy="149.0845" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="132.8171" x="42.7083" y="151.4887">bool IsAttached() const</text><ellipse cx="29.1667" cy="172.8394" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="241.8894" x="42.7083" y="175.2436">SharedOwnedObserver&amp; Observer() const</text><ellipse cx="29.1667" cy="196.5942" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="324.9736" x="42.7083" y="198.9985">SharedPtr&lt;SharedOwnedObserver&gt; ObserverPtr() const</text></g><!--class ConnectionObserver--><g class="entity" data-entity="ConnectionObserver" data-source-line="21" data-uid="ent0004" id="entity_ConnectionObserver"><rect fill="none" height="145.8577" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.0417;" width="446.8826" x="448.875" y="298.375"/><rect fill="url(#gabcusa2z92qi0)" height="34.1715" rx="4.1667" ry="4.1667" style="stroke:url(#gabcusa2z92qi0);stroke-width:1.0417;" width="446.8826" x="448.875" y="298.375"/><rect fill="url(#gabcusa2z92qi0)" height="4.1667" style="stroke:url(#gabcusa2z92qi0);stroke-width:1.0417;" width="446.8826" x="448.875" y="328.3799"/><rect fill="none" height="145.8577" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.0417;" width="446.8826" x="448.875" y="298.375"/><ellipse cx="604.2425" cy="315.4608" fill="#EDF0F2" rx="10.4167" ry="10.4167" style="stroke:#BABDBF;stroke-width:1.0417;"/><path d="M606.1468,319.8879 Q605.7237,320.0994 605.2516,320.2134 Q604.7796,320.3273 604.2751,320.3273 Q602.4196,320.3273 601.4431,319.1229 Q600.4828,317.9022 600.4828,315.6073 Q600.4828,313.2961 601.4431,312.0916 Q602.4196,310.8709 604.2751,310.8709 Q604.7796,310.8709 605.2516,310.9849 Q605.7399,311.0825 606.1468,311.3104 L606.1468,313.3123 Q605.6911,312.8892 605.2516,312.6938 Q604.8122,312.4823 604.3565,312.4823 Q603.3636,312.4823 602.8591,313.2798 Q602.3545,314.061 602.3545,315.6073 Q602.3545,317.1372 602.8591,317.9185 Q603.3636,318.6997 604.3565,318.6997 Q604.8122,318.6997 605.2516,318.5044 Q605.6911,318.3091 606.1468,317.8859 L606.1468,319.8879 Z " fill="#2FA4E7"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="117.3976" x="629.2425" y="319.4276">ConnectionObserver</text><line style="stroke:#2FA4E7;stroke-width:1.0417;" x1="449.9167" x2="894.716" y1="332.5465" y2="332.5465"/><line style="stroke:#2FA4E7;stroke-width:1.0417;" x1="449.9167" x2="894.716" y1="340.8799" y2="340.8799"/><ellipse cx="460.3333" cy="358.4865" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="410.4243" x="473.875" y="360.8908">void SendStreamAvailable(SharedPtr&lt;StreamWriter&gt;&amp;&amp; streamWriter)</text><ellipse cx="460.3333" cy="382.2414" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="116.8381" x="473.875" y="384.6457">void DataReceived()</text><ellipse cx="460.3333" cy="405.9963" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="97.1944" x="473.875" y="408.4005">void Close() {...}</text><ellipse cx="460.3333" cy="429.7511" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="97.3063" x="473.875" y="432.1554">void Abort() {...}</text></g><!--class Connection--><g class="entity" data-entity="Connection" data-source-line="28" data-uid="ent0005" id="entity_Connection"><rect fill="none" height="193.3675" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.0417;" width="380.8965" x="31.8646" y="274.625"/><rect fill="url(#gabcusa2z92qi0)" height="34.1715" rx="4.1667" ry="4.1667" style="stroke:url(#gabcusa2z92qi0);stroke-width:1.0417;" width="380.8965" x="31.8646" y="274.625"/><rect fill="url(#gabcusa2z92qi0)" height="4.1667" style="stroke:url(#gabcusa2z92qi0);stroke-width:1.0417;" width="380.8965" x="31.8646" y="304.6299"/><rect fill="none" height="193.3675" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.0417;" width="380.8965" x="31.8646" y="274.625"/><ellipse cx="180.521" cy="291.7108" fill="#EDF0F2" rx="10.4167" ry="10.4167" style="stroke:#BABDBF;stroke-width:1.0417;"/><path d="M182.4253,296.1379 Q182.0022,296.3494 181.5302,296.4634 Q181.0582,296.5773 180.5536,296.5773 Q178.6981,296.5773 177.7216,295.3729 Q176.7613,294.1522 176.7613,291.8573 Q176.7613,289.5461 177.7216,288.3416 Q178.6981,287.1209 180.5536,287.1209 Q181.0582,287.1209 181.5302,287.2349 Q182.0184,287.3325 182.4253,287.5604 L182.4253,289.5623 Q181.9696,289.1392 181.5302,288.9438 Q181.0907,288.7323 180.635,288.7323 Q179.6421,288.7323 179.1376,289.5298 Q178.633,290.311 178.633,291.8573 Q178.633,293.3872 179.1376,294.1685 Q179.6421,294.9497 180.635,294.9497 Q181.0907,294.9497 181.5302,294.7544 Q181.9696,294.5591 182.4253,294.1359 L182.4253,296.1379 Z " fill="#2FA4E7"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="64.8336" x="205.521" y="295.6776">Connection</text><line style="stroke:#2FA4E7;stroke-width:1.0417;" x1="32.9063" x2="411.7194" y1="308.7965" y2="308.7965"/><line style="stroke:#2FA4E7;stroke-width:1.0417;" x1="32.9063" x2="411.7194" y1="317.1299" y2="317.1299"/><ellipse cx="43.3229" cy="334.7365" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="267.072" x="56.8646" y="337.1408">void RequestSendStream(std::size_t sendSize)</text><ellipse cx="43.3229" cy="358.4914" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="222.934" x="56.8646" y="360.8957">std::size_t MaxSendStreamSize() const</text><ellipse cx="43.3229" cy="382.2463" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="344.4382" x="56.8646" y="384.6505">SharedPtr&lt;StreamReaderWithRewinding&gt; ReceiveStream()</text><ellipse cx="43.3229" cy="406.0011" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="110.2529" x="56.8646" y="408.4054">void AckReceived()</text><ellipse cx="43.3229" cy="429.756" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="135.2564" x="56.8646" y="432.1603">void CloseAndDestroy()</text><ellipse cx="43.3229" cy="453.5109" fill="none" rx="3.125" ry="3.125" style="stroke:#2683B9;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" font-style="italic" lengthAdjust="spacing" textLength="135.3683" x="56.8646" y="455.9152">void AbortAndDestroy()</text></g><!--reverse link SharedOwnedObserver to ConnectionObserver--><g class="link" data-entity-1="SharedOwnedObserver" data-entity-2="ConnectionObserver" data-source-line="37" data-uid="lnk6" id="link_SharedOwnedObserver_ConnectionObserver"><path codeLine="37" d="M670.0241,230.1642 C670.4928,258.9454 670.6979,271.2604 671.1354,298.2188" fill="none" id="SharedOwnedObserver-backto-ConnectionObserver" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="none" points="669.7188,211.4167,663.7749,230.266,676.2733,230.0624,669.7188,211.4167" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><!--reverse link SharedOwningSubject to Connection--><g class="link" data-entity-1="SharedOwningSubject" data-entity-2="Connection" data-source-line="38" data-uid="lnk7" id="link_SharedOwningSubject_Connection"><path codeLine="38" d="M224.6028,230.1642 C224.2695,250.758 224.2188,253.7813 223.8854,274.375" fill="none" id="SharedOwningSubject-backto-Connection" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="none" points="224.9063,211.4167,218.3536,230.0631,230.852,230.2654,224.9063,211.4167" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><!--link SharedOwningSubject to SharedOwnedObserver--><g class="link" data-entity-1="SharedOwningSubject" data-entity-2="SharedOwnedObserver" data-source-line="39" data-uid="lnk9" id="link_SharedOwningSubject_SharedOwnedObserver"><path codeLine="39" d="M435.6771,114.3958 C470.125,114.3958 504.9479,114.3958 536.7917,114.3958" fill="none" id="SharedOwningSubject-SharedOwnedObserver" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#343A40" points="465.8125,98.7546,458.2749,96.3055,458.2749,101.2037,465.8125,98.7546" style="stroke:#343A40;stroke-width:1.0417;"/><text fill="#343A40" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="32.3059" x="476.2292" y="103.0819">owns</text></g><!--SRC=[ZPJ1KeCm48RlVOhrmb0T-W2TJcUOzkB1qO53ZquWgqJJP4mMgcBVNQ2qG4kg79W5llp9_sV33MMuHKZHv1AP2dHEKYYSJA2wKiciXJXZ1ldZJbMtnA8fq43PVA-lkqHh2VSs969fXjoVGggLfGuuZHVgDSwJDqp9WxQuf0ijEAon5lEdtUkI9POCIsdV0BtPohsJEiXKqmwnO6H5js0FHKFjH_rtTCz_A_P4PZ4Ir19qMvqvF1Zm6_DmNS8xQKp_ZEd_cz5DuC6nSk5ESyUg0WPZ1_cjj59LPaAh8ruwTon6nMCooBPXmOHaYKI_juRcoyO8gcFnmFQUtRsoPiGYJ54KTI1ER2MrnRfHPhEPkwN2H1iQK0wlu3OPuKUEbZgllYK-drlnZSy4jdvTbQChxOCFxBEJg4TSRbyty3p421b7in6KHRWJYbUzlOGsfNPHLqvV-lxVG4F5rvLNex-kwTMXNf1ji6E_dyLF48pqrP3l7TSptgaRI7oXO5HY3WlGEsL_0G00]--></g></svg>